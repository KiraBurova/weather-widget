(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{10:function(e,t,n){e.exports={widget:"Widget_widget__16nWC",widgetTop:"Widget_widgetTop__1QKOY",settingsIcon:"Widget_settingsIcon__1qNME",place:"Widget_place__3i_Xq",temperature:"Widget_temperature__2z1dA",weatherDescription:"Widget_weatherDescription__2_KiV",wind:"Widget_wind__1ziyN",pressure:"Widget_pressure__2Ke1F",row:"Widget_row__1zs8w",boldText:"Widget_boldText__2FTSb"}},11:function(e,t,n){e.exports={settings:"Settings_settings__TQlU_",settingsTop:"Settings_settingsTop__15DuA",closeIcon:"Settings_closeIcon__1ybnQ",addedLocations:"Settings_addedLocations__2jW7U",emptyPlaceholder:"Settings_emptyPlaceholder__2iRUq"}},13:function(e,t,n){e.exports={formLabel:"AddLocation_formLabel__-uEro",form:"AddLocation_form__1tXxt",addButton:"AddLocation_addButton__201-N",locationInput:"AddLocation_locationInput__2ebaA"}},14:function(e,t,n){e.exports={container:"App_container__eSJ6i",app:"App_app__2ziFi",settingsIcon:"App_settingsIcon__1cVps",error:"App_error__1LS0k"}},16:function(e,t,n){e.exports={item:"LocationItem_item__2M2rr",dragIcon:"LocationItem_dragIcon__AscEE",deleteIcon:"LocationItem_deleteIcon__1vC8d"}},42:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(7),s=n.n(o),c=(n(42),n(9)),r=n(5),d=n(4),l=n(30),u=n.n(l),p=n(37),j=n(20),h=n.n(j),b=function(e){return"https://openweathermap.org/img/wn/".concat(e,"@2x.png")},m=function(e){return Math.round(e)},g=function(e){return{name:e.name,countryName:e.sys.country,weather:e.weather,feelsLike:e.main.feels_like,temperature:e.main.temp,wind:e.wind,humidity:e.main.humidity,visibility:e.visibility,pressure:e.main.pressure,clouds:e.clouds.all}};function _(){return{loading:!1,locations:[],weatherReports:[],setLoading:function(e){this.loading=e},fetchWeatherReportByLocation:function(e,t){var n=this;this.setLoading(!0),function(e,t){return h.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat("3c4aa69b71fd74a7a45c94ca31623a52","&units=metric"))}(e,t).then((function(e){var t=g(e.data);n.setWeatherReports(t);var a={name:t.name,id:Math.random()};n.addLocation(a),n.setLocationsToLocalStorage()})).catch((function(e){return console.log(e)})).then((function(){return n.setLoading(!1)}))},fetchWeatherReportByCityName:function(e){var t,n=this;this.setLoading(!0),(t=e.name,h.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("3c4aa69b71fd74a7a45c94ca31623a52","&units=metric"))).then((function(t){n.addLocation(e),n.setLocationsToLocalStorage();var a=g(t.data);n.setWeatherReports(a)})).catch((function(e){return console.log(e)})).then((function(){return n.setLoading(!1)}))},reorderWeatherReports:function(){var e=this;this.weatherReports=Object(p.a)(this.weatherReports).sort((function(t,n){return e.locations.findIndex((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}))-e.locations.findIndex((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))}))},setWeatherReports:function(e){this.weatherReports.push(e)},addLocation:function(e){this.locations.push(e)},setLocations:function(e){this.locations=e},deleteLocation:function(e){this.locations=this.locations.filter((function(t){return t.id!==e}))},reorderLocations:function(e,t,n){var a=Array.from(e),i=a.splice(t,1),o=Object(c.a)(i,1)[0];a.splice(n,0,o),this.setLocations(a),this.setLocationsToLocalStorage(),this.reorderWeatherReports()},setLocationsToLocalStorage:function(){var e=JSON.stringify(this.locations);localStorage.setItem("locations",e)},getLocationFromLocalStorage:function(){var e=localStorage.getItem("locations")||"{}";return JSON.parse(e)}}}var O=n(1),f=i.a.createContext(null),x=function(e){var t=e.children,n=Object(r.b)(_);return Object(O.jsx)(f.Provider,{value:n,children:t})},v=function(){var e=i.a.useContext(f);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e},w=n(31),L=n.n(w),N=n(32),y=n.n(N),I=n(8),S=n.n(I),W=function(e){var t,n=e.weatherReport;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:S.a.row,children:[n.wind.speed&&Object(O.jsxs)("span",{className:S.a.wind,"data-testid":"wind",children:[Object(O.jsx)(d.Icon,{icon:y.a}),n.wind.speed,"m/s"]}),n.pressure&&Object(O.jsxs)("span",{"data-testid":"pressure",className:S.a.pressure,children:[Object(O.jsx)(d.Icon,{icon:L.a}),n.pressure,"hPa"]})]}),Object(O.jsxs)("div",{className:S.a.row,children:[n.humidity&&Object(O.jsxs)("span",{"data-testid":"humidity",children:["Humidity: ",Object(O.jsxs)("span",{className:S.a.boldText,children:[n.humidity,"%"]})]}),n.clouds&&Object(O.jsxs)("span",{"data-testid":"cloudiness",children:["Cloudiness: ",Object(O.jsxs)("span",{className:S.a.boldText,children:[n.clouds,"%"]})]})]}),n.visibility&&Object(O.jsxs)("span",{"data-testid":"visibility",children:["Visibility: ",Object(O.jsxs)("span",{className:S.a.boldText,children:[(t=n.visibility,t/1e3),"km"]})]})]})},R=n(10),T=n.n(R),C=function(e){var t=e.weatherReport;return Object(O.jsxs)("div",{className:T.a.widget,children:[Object(O.jsx)("div",{className:T.a.widgetTop,children:t.name&&Object(O.jsxs)("span",{className:T.a.place,"data-testid":"place",children:[t.name,", ",t.countryName]})}),Object(O.jsxs)("div",{className:T.a.temperature,"data-testid":"temperature",children:[t.weather.map((function(e){return Object(O.jsx)("img",{src:b(e.icon),alt:"Weather icon"},e.id)})),Object(O.jsxs)("span",{children:[m(t.temperature),"\xb0C"]})]}),Object(O.jsxs)("p",{className:T.a.weatherDescriptionContainer,"data-testid":"description",children:[Object(O.jsxs)("span",{children:["Feels like ",m(t.feelsLike),"\xb0C."]}),Object(O.jsxs)("span",{className:T.a.weatherDescription,children:[t.weather.map((function(e){return e.description})),"."]})]}),Object(O.jsx)(W,{weatherReport:t})]})},A=n(6),P=n(17),k=n(33),B=n.n(k),E=n(34),F=n.n(E),D=n(35),M=n.n(D),J=n(16),q=n.n(J),z=Object(r.a)((function(e){var t,n=e.location,a=e.dragHandleProps,i=v().deleteLocation;return Object(O.jsxs)("div",{className:q.a.item,children:[Object(O.jsx)("div",Object(A.a)(Object(A.a)({},a),{},{children:Object(O.jsx)(d.Icon,{icon:F.a,className:q.a.dragIcon})})),n.name,Object(O.jsx)("span",{className:q.a.deleteIcon,onClick:(t=n.id,function(){i(t)}),role:"button",children:Object(O.jsx)(d.Icon,{icon:M.a})})]})})),H=n(36),U=n.n(H),K=n(13),Q=n.n(K),V=Object(r.a)((function(){var e=v().fetchWeatherReportByCityName,t=Object(a.useState)(""),n=Object(c.a)(t,2),i=n[0],o=n[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:Q.a.formLabel,children:"Add location:"}),Object(O.jsxs)("form",{className:Q.a.form,onSubmit:function(t){t.preventDefault();var n={name:i,id:Math.random()};e(n),o("")},"data-testid":"form",children:[Object(O.jsx)("input",{autoFocus:!0,className:Q.a.locationInput,value:i,onChange:function(e){var t=e.target.value;o(t)}}),Object(O.jsx)("button",{type:"submit",className:Q.a.addButton,disabled:!i,children:Object(O.jsx)(d.Icon,{icon:U.a})})]})]})})),G=n(11),X=n.n(G),Y=Object(r.a)((function(e){var t=e.handleToggleSettings,n=v(),a=n.locations,i=n.reorderLocations;return Object(O.jsxs)("div",{className:X.a.settings,children:[Object(O.jsxs)("div",{className:X.a.settingsTop,children:[Object(O.jsx)("span",{children:"Settings"}),Object(O.jsx)("div",{onClick:t,children:Object(O.jsx)(d.Icon,{icon:B.a,className:X.a.closeIcon})})]}),Object(O.jsx)(P.a,{onDragEnd:function(e){e.destination&&i(a,e.source.index,e.destination.index)},children:Object(O.jsx)(P.c,{droppableId:"droppable",children:function(e){return Object(O.jsxs)("div",Object(A.a)(Object(A.a)({className:X.a.addedLocations},e.droppableProps),{},{ref:e.innerRef,children:[a.map((function(e,t){return Object(O.jsx)(P.b,{draggableId:""+e.id,index:t,children:function(t){return Object(O.jsx)("div",Object(A.a)(Object(A.a)({ref:t.innerRef},t.draggableProps),{},{style:Object(A.a)(Object(A.a)({},t.draggableProps.style),{},{marginBottom:"5px"}),children:Object(O.jsx)(z,{dragHandleProps:t.dragHandleProps,location:e})}))}},e.id)})),e.placeholder]}))}})}),!a.length&&Object(O.jsx)("div",{className:X.a.emptyPlaceholder,children:"No settings yet."}),Object(O.jsx)(V,{})]})})),Z=n(14),$=n.n(Z),ee=Object(r.a)((function(){var e=v(),t=e.loading,n=e.weatherReports,i=e.getLocationFromLocalStorage,o=e.fetchWeatherReportByLocation,s=e.fetchWeatherReportByCityName,r=Object(a.useState)(""),l=Object(c.a)(r,2),p=l[0],j=l[1],h=Object(a.useState)(!1),b=Object(c.a)(h,2),m=b[0],g=b[1],_=Object(a.useCallback)((function(){g(!m)}),[m]);return Object(a.useEffect)((function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,a=t.longitude,c=i();Object.values(c).length?Object.values(c).forEach((function(e){s(e)})):o(n,a)}),(function(e){return j(e.message)})):j("Geolocation is not available")}),[o,s,i]),Object(O.jsx)("div",{className:$.a.app,children:Object(O.jsxs)("div",{className:$.a.container,children:[m?Object(O.jsx)(Y,{handleToggleSettings:_}):Object(O.jsx)(O.Fragment,{children:!!n.length&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:n.map((function(e){return Object(O.jsx)(C,{weatherReport:e,handleToggleSettings:_},e.name)}))}),Object(O.jsx)("div",{onClick:_,role:"button",children:Object(O.jsx)(d.Icon,{icon:u.a,className:$.a.settingsIcon})})]})}),p&&Object(O.jsx)("span",{className:$.a.error,"data-testid":"error",children:p}),t&&Object(O.jsx)("span",{children:"Loading..."})]})})}));s.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(x,{children:Object(O.jsx)(ee,{})})}),document.getElementById("root"))},8:function(e,t,n){e.exports={wind:"Stats_wind__1S3td",pressure:"Stats_pressure__3uGLM",row:"Stats_row__nyU4p",boldText:"Stats_boldText__1x1uB"}}},[[67,1,2]]]);
//# sourceMappingURL=main.6ac03b5d.chunk.js.map